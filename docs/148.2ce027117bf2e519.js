(self.webpackChunk=self.webpackChunk||[]).push([[148],{84949:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(37422),r=i(63696),s=i(67435),a=i(94631),l=i(62540);function o(){const e=(0,s.g)(),t=(0,r.useMemo)((()=>{if(e.address)try{return new a.PublicKey(e.address)}catch(t){console.log("Invalid public key",t)}}),[e]);return t?(0,l.jsx)("div",{className:"hero py-[64px]",children:(0,l.jsx)("div",{className:"hero-content text-center",children:(0,l.jsx)(n.p,{address:t})})}):(0,l.jsx)("div",{children:"Error loading account"})}},37422:(e,t,i)=>{"use strict";i.d(t,{p:()=>U,c:()=>E});var n=i(11006),r=i(49348),s=i(15445),a=i(34244);function l(e,t=5){if(!e)return`${e}`;const i=e.toString();return i.substring(0,t)+"..."+i.substring(i.length-t)}function o(e,t,i){return Object.assign({slotContext:i,pubkey:e},t)}function c(e,t){return new a.A(e.toFixed(t))}function d(e){return s.DecimalUtil.toBN(new a.A(e.toString()),0)}var u=i(63530),h=i(78267),j=i(94631),m=i(77073),k=i(60720),x=i(70514),g=i(76824),p=i(98599),y=i(98535),f=i(51638),v=i(41292),b=i(42689),A=i.n(b);const I="https://api.mainnet.orca.so/v1/whirlpool/list";async function w(){const e=await(await fetch(I)).json(),t=[];return e.whirlpools.forEach((e=>{var i,n,r;const s=N(e.tokenA.symbol,e.tokenA.mint),l=N(e.tokenB.symbol,e.tokenB.mint);t.push({address:new j.PublicKey(e.address),name:`${s}/${l}(${e.tickSpacing})`,invertedName:`${l}/${s}(${e.tickSpacing})`,symbolA:s,symbolB:l,mintA:new j.PublicKey(e.tokenA.mint),mintB:new j.PublicKey(e.tokenB.mint),tickSpacing:e.tickSpacing,price:new a.A(e.price),usdTVL:new a.A(null!=(i=e.tvl)?i:0),usdVolumeDay:new a.A(null!=(n=null==(r=e.volume)?void 0:r.day)?n:0)})})),t.sort(T),t}function T(e,t){return e.symbolA<t.symbolA?-1:e.symbolA>t.symbolA?1:e.symbolB<t.symbolB?-1:e.symbolB>t.symbolB?1:e.tickSpacing<t.tickSpacing?-1:e.tickSpacing>t.tickSpacing?1:0}function N(e,t){return(null==e?void 0:e.trim())||`\u2753(${l(t,4)})`}const S="https://api.mainnet.orca.so/v1/token/list";class TokenList{constructor(e){this.tokenList=e,this.tokenMintMap=void 0,this.tokenMintMap=new Map;for(const t of e)this.tokenMintMap.set(t.mint.toBase58(),t)}getTokenInfoByMint(e){return this.tokenMintMap.get(e.toString())}}async function B(){const e=await(await fetch(S)).json(),t=[];return e.tokens.forEach((e=>{t.push({mint:new j.PublicKey(e.mint),symbol:N(e.symbol,e.mint),name:N(e.name,e.mint),decimals:e.decimals,logoURI:e.logoURI,coingeckoId:e.coingeckoId,whitelisted:e.whitelisted,poolToken:e.poolToken})})),t.sort(((e,t)=>e.symbol.localeCompare(t.symbol))),new TokenList(t)}const P=10,D=[1,2,4,8,16,32,64,128,256,512];function M(e,t,i){const n=y.TickUtil.getStartTickIndex(e,t);for(const r of i)if((null==r?void 0:r.startTickIndex)===n)return y.TickArrayUtil.getTickFromArray(r,e,t)}async function R(e,t,i){var n,r,l;const u=s.AddressUtil.toPubKey(t),h=(0,y.buildDefaultAccountFetcher)(e),{accountInfo:j,slotContext:m}=await async function(e,t){const i=await e.getAccountInfoAndContext(t);if(!i.value)throw new Error(`Account ${t.toBase58()} does not exist`);return{accountInfo:i.value,slotContext:i.context.slot}}(e,u),k=y.ParsableWhirlpool.parse(u,j),x=[];x.push(k.tokenMintA),x.push(k.tokenMintB),x.push(k.rewardInfos[0].mint),x.push(k.rewardInfos[1].mint),x.push(k.rewardInfos[2].mint);const g=await h.getMintInfos(x,y.IGNORE_CACHE),p=g.get(x[0].toBase58()).decimals,b=g.get(x[1].toBase58()).decimals,I=null==(n=g.get(x[2].toBase58()))?void 0:n.decimals,w=null==(r=g.get(x[3].toBase58()))?void 0:r.decimals,T=null==(l=g.get(x[4].toBase58()))?void 0:l.decimals,N=[];N.push(k.tokenVaultA),N.push(k.tokenVaultB),N.push(k.rewardInfos[0].vault),N.push(k.rewardInfos[1].vault),N.push(k.rewardInfos[2].vault);const S=await h.getTokenInfos(N,y.IGNORE_CACHE),B=[S.get(N[0].toBase58()),S.get(N[1].toBase58()),S.get(N[2].toBase58()),S.get(N[3].toBase58()),S.get(N[4].toBase58())],R=i.getTokenInfoByMint(x[0]),C=i.getTokenInfoByMint(x[1]),z=i.getTokenInfoByMint(x[2]),E=i.getTokenInfoByMint(x[3]),U=i.getTokenInfoByMint(x[4]),q=k.tickSpacing*y.TICK_ARRAY_SIZE,_=y.TickUtil.getStartTickIndex(k.tickCurrentIndex,k.tickSpacing),K=[],F=[];for(let s=-P;s<=P;s++){const e=y.TickUtil.getStartTickIndex(k.tickCurrentIndex,k.tickSpacing,s);e+q<=y.MIN_TICK_INDEX||(e>y.MAX_TICK_INDEX||(K.push(e),F.push(y.PDAUtil.getTickArray(j.owner,u,e).publicKey)))}const X=await h.getTickArrays(F,y.IGNORE_CACHE),V=[];K.forEach(((e,t)=>{V.push({pubkey:F[t],startTickIndex:e,startPrice:c(y.PriceMath.tickIndexToPrice(e,p,b),b),isInitialized:!!X[t],hasTickCurrentIndex:e===_})}));const O=Math.ceil(y.MIN_TICK_INDEX/k.tickSpacing)*k.tickSpacing,$=Math.floor(y.MAX_TICK_INDEX/k.tickSpacing)*k.tickSpacing,L=y.TickUtil.getStartTickIndex(O,k.tickSpacing),W=y.TickUtil.getStartTickIndex($,k.tickSpacing),H=y.PDAUtil.getTickArray(j.owner,u,L).publicKey,G=y.PDAUtil.getTickArray(j.owner,u,W).publicKey,Z=await h.getTickArrays([H,G],y.IGNORE_CACHE),Y=[{pubkey:H,startTickIndex:L,isInitialized:!!Z[0]},{pubkey:G,startTickIndex:W,isInitialized:!!Z[1]}],Q=[];D.forEach((e=>{Q.push(y.PDAUtil.getWhirlpool(j.owner,k.whirlpoolsConfig,k.tokenMintA,k.tokenMintB,e).publicKey)}));const J=await h.getPools(Q,y.IGNORE_CACHE),ee=[];D.forEach(((e,t)=>{const i=J.get(Q[t].toBase58());i&&ee.push({tickSpacing:e,feeRate:y.PoolUtil.getFeeRate(i.feeRate).toDecimal().mul(100),pubkey:Q[t],tickCurrentIndex:i.tickCurrentIndex,price:c(y.PriceMath.sqrtPriceX64ToPrice(i.sqrtPrice,p,b),b),liquidity:i.liquidity})}));const te=y.PDAUtil.getOracle(j.owner,u).publicKey;let ie={downward:[],upward:[],error:!0};try{const e=function(e,t,i,n){let r,a,l,o,d,u,h;const j=e.tickCurrentIndex,m=e.tickSpacing,k=Math.floor(j/m)*m,x=k+m;r=e.tickCurrentIndex,l=e.sqrtPrice,d=e.liquidity;const g=[];for(let b=0;b<10&&(a=x+b*m,h=M(a,m,t),void 0===h&&a--,!(a<=r));b++){o=y.PriceMath.tickIndexToSqrtPriceX64(a),u=c(y.PriceMath.tickIndexToPrice(a,i,n),n);const e=(0,v.getAmountDeltaA)(l,o,d,!1),t=(0,v.getAmountDeltaB)(l,o,d,!0);if(g.push({tickIndex:a,price:u,amountA:s.DecimalUtil.fromBN(new f.BN(e),i),amountB:s.DecimalUtil.fromBN(new f.BN(t),n)}),void 0===h)break;r=a,l=o,d=d.add(h.liquidityNet)}r=e.tickCurrentIndex,l=e.sqrtPrice,d=e.liquidity;const p=[];for(let b=0;b<10&&(a=k-b*m,h=M(a,m,t),void 0!==h);b++){o=y.PriceMath.tickIndexToSqrtPriceX64(a),u=c(y.PriceMath.tickIndexToPrice(a,i,n),n);const e=(0,v.getAmountDeltaA)(l,o,d,!0),t=(0,v.getAmountDeltaB)(l,o,d,!1);p.push({tickIndex:a,price:u,amountA:s.DecimalUtil.fromBN(new f.BN(e),i),amountB:s.DecimalUtil.fromBN(new f.BN(t),n)}),r=a,l=o,d=d.sub(h.liquidityNet)}return{upward:g,downward:p,error:!1}}(k,X.slice(),p,b);ie=e}catch(re){console.log(re)}let ne={downward:[],upward:[],error:!0};try{const e=function(e,t,i,n,r,l){let o,d,u,h,j,m,k;const x=e.tickCurrentIndex,g=e.tickSpacing,p=g*y.TICK_ARRAY_SIZE,b=Math.floor(x/g)*g,A=b+g,I=Math.floor(x/p)*p,w=(I-t[0])/p,T=[],N=[],S=[],B=[],P=[];for(let s=0;w+s<i.length;s++)T.push(i[w+s]),N.push(t[w+s]),S.push(n[w+s]),B.push(new a.A(0)),P.push(new a.A(0));const D=Math.min(y.MAX_TICK_INDEX,I+S.length*p);let R=0;o=e.tickCurrentIndex,u=e.sqrtPrice,j=e.liquidity;for(let a=0;d=A+a*g,!(d>D);a++){h=y.PriceMath.tickIndexToSqrtPriceX64(d),m=c(y.PriceMath.tickIndexToPrice(d,r,l),l);const e=(0,v.getAmountDeltaA)(u,h,j,!1),t=(0,v.getAmountDeltaB)(u,h,j,!0),i=s.DecimalUtil.fromBN(new f.BN(e),r),a=s.DecimalUtil.fromBN(new f.BN(t),l);B[R]=B[R].add(i),P[R]=P[R].add(a),k=M(d,g,n),void 0!==k&&(j=j.add(k.liquidityNet)),o=d,u=h,d%p==0&&R++}const C=[],z=[],E=[],U=[],q=[];for(let s=0;w-s>=0;s++)C.push(i[w-s]),z.push(t[w-s]),E.push(n[w-s]),U.push(new a.A(0)),q.push(new a.A(0));const _=Math.max(y.MIN_TICK_INDEX,I-(E.length-1)*p);let K=0;o=e.tickCurrentIndex,u=e.sqrtPrice,j=e.liquidity;for(let a=0;d=b-a*g,!(d<_);a++){h=y.PriceMath.tickIndexToSqrtPriceX64(d),m=c(y.PriceMath.tickIndexToPrice(d,r,l),l);const e=(0,v.getAmountDeltaA)(u,h,j,!0),t=(0,v.getAmountDeltaB)(u,h,j,!1),i=s.DecimalUtil.fromBN(new f.BN(e),r),a=s.DecimalUtil.fromBN(new f.BN(t),l);U[K]=U[K].add(i),q[K]=q[K].add(a),k=M(d,g,n),void 0!==k&&(j=j.sub(k.liquidityNet)),o=d,u=h,d%p==0&&K++}const F=[];for(let s=0;s<T.length;s++)F.push({tickArrayPubkey:T[s],tickArrayStartIndex:N[s],tickArrayStartPrice:c(y.PriceMath.tickIndexToPrice(N[s],r,l),l),tickArrayData:S[s],amountA:B[s],amountB:P[s]});const X=[];for(let s=0;s<C.length;s++)X.push({tickArrayPubkey:C[s],tickArrayStartIndex:z[s],tickArrayStartPrice:c(y.PriceMath.tickIndexToPrice(z[s],r,l),l),tickArrayData:E[s],amountA:U[s],amountB:q[s]});return{upward:F,downward:X,error:!1}}(k,K,F,X.slice(),p,b);ne=e}catch(re){console.log(re)}return{meta:o(u,j,m),parsed:k,derived:{price:c(y.PriceMath.sqrtPriceX64ToPrice(k.sqrtPrice,p,b),b),invertedPrice:c(new a.A(1).div(y.PriceMath.sqrtPriceX64ToPrice(k.sqrtPrice,p,b)),p),feeRate:y.PoolUtil.getFeeRate(k.feeRate).toDecimal().mul(100),protocolFeeRate:y.PoolUtil.getProtocolFeeRate(k.protocolFeeRate).toDecimal().mul(100),decimalsA:p,decimalsB:b,decimalsR0:I,decimalsR1:w,decimalsR2:T,tokenInfoA:R,tokenInfoB:C,tokenInfoR0:z,tokenInfoR1:E,tokenInfoR2:U,tokenVaultAAmount:s.DecimalUtil.fromBN(B[0].amount,p),tokenVaultBAmount:s.DecimalUtil.fromBN(B[1].amount,b),tokenVaultR0Amount:void 0===I?void 0:s.DecimalUtil.fromBN(B[2].amount,I),tokenVaultR1Amount:void 0===w?void 0:s.DecimalUtil.fromBN(B[3].amount,w),tokenVaultR2Amount:void 0===T?void 0:s.DecimalUtil.fromBN(B[4].amount,T),reward0WeeklyEmission:void 0===I?void 0:s.DecimalUtil.fromBN(d(k.rewardInfos[0].emissionsPerSecondX64.muln(604800).shrn(64)),I),reward1WeeklyEmission:void 0===w?void 0:s.DecimalUtil.fromBN(d(k.rewardInfos[1].emissionsPerSecondX64.muln(604800).shrn(64)),w),reward2WeeklyEmission:void 0===T?void 0:s.DecimalUtil.fromBN(d(k.rewardInfos[2].emissionsPerSecondX64.muln(604800).shrn(64)),T),rewardLastUpdatedTimestamp:A().unix(k.rewardLastUpdatedTimestamp.toNumber()),fullRangeTickArrays:Y,neighboringTickArrays:V,isotopeWhirlpools:ee,oracle:te,tradableAmounts:ie,tickArrayTradableAmounts:ne}}}function C(e){const{connection:t}=(0,u.w)(),i=(0,m.I)({queryKey:["tokens"],queryFn:B});return(0,m.I)({queryKey:["whirlpool",{address:e,endpoint:t.rpcEndpoint}],queryFn:()=>R(t,e,i.data),enabled:!!i.data})}var z=i(62540);function E(){var e;const t=(0,m.I)({queryKey:["whirlpools"],queryFn:w}),i=t.data;return(0,z.jsxs)("div",{className:"space-y-2",children:[(0,z.jsx)("div",{className:"justify-between",children:(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("h2",{className:"text-2xl font-bold",children:"Whirlpools"}),(0,z.jsx)("div",{className:"space-x-2",children:t.isLoading?(0,z.jsx)("span",{className:"loading loading-spinner"}):(0,z.jsx)("button",{className:"btn btn-sm btn-outline",onClick:async()=>{await t.refetch()},children:(0,z.jsx)(n.A,{size:16})})})]})}),t.isError&&(0,z.jsxs)("pre",{className:"alert alert-error",children:["Error: ",null==(e=t.error)?void 0:e.message.toString()]}),t.isSuccess&&(0,z.jsx)("div",{children:0===t.data.length?(0,z.jsx)("div",{children:"No whirlpools found."}):(0,z.jsxs)("table",{className:"table border-4 rounded-lg border-separate border-base-300",children:[(0,z.jsx)("thead",{children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{children:"name"}),(0,z.jsx)("th",{children:"tickSpacing"}),(0,z.jsx)("th",{className:"text-right",children:"price"}),(0,z.jsx)("th",{className:"text-right",children:"TVL"}),(0,z.jsx)("th",{className:"text-right",children:"24H Volume"})]})}),(0,z.jsx)("tbody",{children:null==i?void 0:i.map((e=>(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{children:(0,z.jsx)("div",{className:"flex space-x-2",children:(0,z.jsx)("span",{className:"font-mono",children:(0,z.jsx)(r.N_,{to:`${e.address.toString()}`,children:e.name})})})}),(0,z.jsx)("td",{children:(0,z.jsx)("div",{className:"flex space-x-2",children:(0,z.jsx)("span",{className:"font-mono",children:e.tickSpacing})})}),(0,z.jsx)("td",{className:"text-right",children:(0,z.jsx)("span",{className:"font-mono",children:e.price.toSignificantDigits(4).toString()})}),(0,z.jsx)("td",{className:"text-right",children:(0,z.jsx)("span",{className:"font-mono",children:e.usdTVL.toFixed(0)})}),(0,z.jsx)("td",{className:"text-right",children:(0,z.jsx)("span",{className:"font-mono",children:e.usdVolumeDay.toFixed(0)})})]},e.address.toString())))})]})})]})}function U({address:e}){var t,i,r;const s=C(e),a=s.data,o=e=>void 0===e||""===e.symbol?"":`(${e.symbol})`,c="initialized",d="NOT INITIALIZED";return(0,z.jsxs)("div",{className:"space-y-2",children:[(0,z.jsx)("div",{className:"justify-between",children:(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("h2",{className:"text-2xl font-bold mr-4",children:e.toString()}),(0,z.jsx)("div",{className:"space-x-2",children:s.isLoading?(0,z.jsx)("span",{className:"loading loading-spinner"}):(0,z.jsx)("button",{className:"btn btn-sm btn-outline",onClick:async()=>{await s.refetch()},children:(0,z.jsx)(n.A,{size:16})})})]})}),s.isError&&(0,z.jsxs)("pre",{className:"alert alert-error",children:["Error: ",null==(t=s.error)?void 0:t.message.toString()]}),s.isSuccess&&(0,z.jsx)("div",{children:s.data?(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"text-xl font-bold my-4",children:"Pool Data"}),(0,z.jsxs)("table",{className:"table border-4 rounded-lg border-separate border-base-300",children:[(0,z.jsx)("thead",{children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{children:"field"}),(0,z.jsx)("th",{children:"value"})]})}),(0,z.jsxs)("tbody",{children:[(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{children:"whirlpoolsConfig"}),(0,z.jsx)("td",{children:null==a?void 0:a.parsed.whirlpoolsConfig.toString()})]}),(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{children:"tokenMintA"}),(0,z.jsxs)("td",{children:[null==a?void 0:a.parsed.tokenMintA.toString()," ",o(null==a?void 0:a.derived.tokenInfoA)]})]}),(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{children:"tokenMintB"}),(0,z.jsxs)("td",{children:[null==a?void 0:a.parsed.tokenMintB.toString()," ",o(null==a?void 0:a.derived.tokenInfoB)]})]}),(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{children:"tickSpacing"}),(0,z.jsx)("td",{children:null==a?void 0:a.parsed.tickSpacing})]}),(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{children:"liquidity"}),(0,z.jsx)("td",{children:null==a?void 0:a.parsed.liquidity.toString()})]}),(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{children:"sqrtPrice"}),(0,z.jsx)("td",{children:null==a?void 0:a.parsed.sqrtPrice.toString()})]}),(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{children:"tickCurrentIndex"}),(0,z.jsx)("td",{children:null==a?void 0:a.parsed.tickCurrentIndex})]}),(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{children:"feeRate"}),(0,z.jsxs)("td",{children:[null==a?void 0:a.parsed.feeRate," (",null==a?void 0:a.derived.feeRate.toString(),"%)"]})]}),(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{children:"protocolFeeFate"}),(0,z.jsxs)("td",{children:[null==a?void 0:a.parsed.protocolFeeRate," (",null==a?void 0:a.derived.protocolFeeRate.toString(),"%)"]})]}),(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{children:"price [B/A]"}),(0,z.jsx)("td",{children:null==a?void 0:a.derived.price.toSignificantDigits(6).toString()})]}),(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{children:"invertedPrice [A/B]"}),(0,z.jsx)("td",{children:null==a?void 0:a.derived.invertedPrice.toSignificantDigits(6).toString()})]}),(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{children:"tokenVaultA"}),(0,z.jsxs)("td",{children:[null==a?void 0:a.derived.tokenVaultAAmount.toString()," ",o(null==a?void 0:a.derived.tokenInfoA)]})]}),(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{children:"tokenVaultB"}),(0,z.jsxs)("td",{children:[null==a?void 0:a.derived.tokenVaultBAmount.toString()," ",o(null==a?void 0:a.derived.tokenInfoB)]})]})]})]}),(0,z.jsx)("h3",{className:"text-xl font-bold my-4",children:"TickArray For FullRange"}),(0,z.jsxs)("table",{className:"table border-4 rounded-lg border-separate border-base-300",children:[(0,z.jsx)("thead",{children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{children:"initialized"}),(0,z.jsx)("th",{children:"start tick"}),(0,z.jsx)("th",{children:"pubkey"}),(0,z.jsx)("th",{})]})}),(0,z.jsxs)("tbody",{children:[(0,z.jsxs)("tr",{className:null!=a&&a.derived.fullRangeTickArrays[1].isInitialized?"":"bg-gray-500",children:[(0,z.jsx)("td",{children:null!=a&&a.derived.fullRangeTickArrays[1].isInitialized?c:d}),(0,z.jsxs)("td",{children:[null==a?void 0:a.derived.fullRangeTickArrays[1].startTickIndex," (max)"]}),(0,z.jsx)("td",{children:l(null==a?void 0:a.derived.fullRangeTickArrays[1].pubkey.toString())}),(0,z.jsx)("td",{children:(0,z.jsx)(q,{initialized:null!=(i=null==a?void 0:a.derived.fullRangeTickArrays[1].isInitialized)&&i,whirlpool:null==a?void 0:a.meta.pubkey,tickStartIndex:null==a?void 0:a.derived.fullRangeTickArrays[1].startTickIndex})})]}),(0,z.jsxs)("tr",{className:null!=a&&a.derived.fullRangeTickArrays[0].isInitialized?"":"bg-gray-500",children:[(0,z.jsx)("td",{children:null!=a&&a.derived.fullRangeTickArrays[0].isInitialized?c:d}),(0,z.jsxs)("td",{children:[null==a?void 0:a.derived.fullRangeTickArrays[0].startTickIndex," (min)"]}),(0,z.jsx)("td",{children:l(null==a?void 0:a.derived.fullRangeTickArrays[0].pubkey.toString())}),(0,z.jsx)("td",{children:(0,z.jsx)(q,{initialized:null!=(r=null==a?void 0:a.derived.fullRangeTickArrays[0].isInitialized)&&r,whirlpool:null==a?void 0:a.meta.pubkey,tickStartIndex:null==a?void 0:a.derived.fullRangeTickArrays[0].startTickIndex})})]})]})]}),(0,z.jsx)("h3",{className:"text-xl font-bold my-4",children:"Neighboring TickArrays"}),(0,z.jsxs)("table",{className:"table border-4 rounded-lg border-separate border-base-300",children:[(0,z.jsx)("thead",{children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{children:"initialized"}),(0,z.jsx)("th",{children:"start tick"}),(0,z.jsx)("th",{children:"price range"}),(0,z.jsxs)("th",{children:["tradableA ",o(null==a?void 0:a.derived.tokenInfoA)]}),(0,z.jsxs)("th",{children:["tradableB ",o(null==a?void 0:a.derived.tokenInfoB)]}),(0,z.jsx)("th",{children:"pubkey"}),(0,z.jsx)("th",{})]})}),(0,z.jsxs)("tbody",{children:[null==a?void 0:a.derived.tickArrayTradableAmounts.upward.slice().reverse().map((e=>(0,z.jsxs)("tr",{className:e.tickArrayData?"":"bg-gray-500",children:[(0,z.jsx)("td",{children:e.tickArrayData?c:d}),(0,z.jsx)("td",{children:e.tickArrayStartIndex}),(0,z.jsxs)("td",{children:["~ ",(()=>{const t=e.tickArrayStartIndex+(null==a?void 0:a.parsed.tickSpacing)*y.TICK_ARRAY_SIZE,i=y.PriceMath.tickIndexToPrice(t,null==a?void 0:a.derived.decimalsA,null==a?void 0:a.derived.decimalsB),n=i.div(null==a?void 0:a.derived.price).sub(1).mul(100);return`${i.toSignificantDigits(6).toString()} (+${n.toFixed(2)}%)`})()]}),(0,z.jsx)("td",{className:e.tickArrayData?"bg-pink-900":"",children:e.amountA.toString()}),(0,z.jsx)("td",{children:e.amountB.toString()}),(0,z.jsx)("td",{children:l(e.tickArrayPubkey.toString())}),(0,z.jsx)("td",{children:(0,z.jsx)(q,{initialized:!!e.tickArrayData,whirlpool:null==a?void 0:a.meta.pubkey,tickStartIndex:e.tickArrayStartIndex})})]}))),null==a?void 0:a.derived.tickArrayTradableAmounts.downward.map((e=>(0,z.jsxs)("tr",{className:e.tickArrayData?"":"bg-gray-500",children:[(0,z.jsx)("td",{children:e.tickArrayData?c:d}),(0,z.jsx)("td",{children:e.tickArrayStartIndex}),(0,z.jsxs)("td",{children:["~ ",(()=>{const t=e.tickArrayStartIndex,i=y.PriceMath.tickIndexToPrice(t,null==a?void 0:a.derived.decimalsA,null==a?void 0:a.derived.decimalsB),n=i.div(null==a?void 0:a.derived.price).sub(1).mul(100);return`${i.toSignificantDigits(6).toString()} (${n.toFixed(2)}%)`})()]}),(0,z.jsx)("td",{children:e.amountA.toString()}),(0,z.jsx)("td",{className:e.tickArrayData?"bg-blue-900":"",children:e.amountB.toString()}),(0,z.jsx)("td",{children:l(e.tickArrayPubkey.toString())}),(0,z.jsx)("td",{children:(0,z.jsx)(q,{initialized:!!e.tickArrayData,whirlpool:null==a?void 0:a.meta.pubkey,tickStartIndex:e.tickArrayStartIndex})})]})))]})]})]}):(0,z.jsx)("div",{children:"No whirlpool found."})})]})}function q({initialized:e,whirlpool:t,tickStartIndex:i}){const n=function({address:e}){const{connection:t}=(0,u.w)(),i=(0,p.hx)(),n=(0,h.v)(),r=(0,k.jE)();return(0,x.n)({mutationKey:["initialize-tick-array",{endpoint:t.rpcEndpoint,address:e}],mutationFn:async i=>{let r="";try{const s=y.WhirlpoolContext.from(t,n,y.ORCA_WHIRLPOOL_PROGRAM_ID),a=y.WhirlpoolIx.initTickArrayIx(s.program,{funder:n.publicKey,startTick:i.tickStartIndex,tickArrayPda:y.PDAUtil.getTickArray(s.program.programId,e,i.tickStartIndex),whirlpool:e}),l=await t.getLatestBlockhash(),o=new j.TransactionMessage({payerKey:n.publicKey,recentBlockhash:l.blockhash,instructions:[...a.instructions]}).compileToLegacyMessage(),c=new j.VersionedTransaction(o);return r=await n.sendTransaction(c,t),await t.confirmTransaction(Object.assign({signature:r},l),"confirmed"),console.log(r),r}catch(s){return void console.log("error",`Transaction failed! ${s}`,r)}},onSuccess:n=>(n&&i(n),Promise.all([r.invalidateQueries({queryKey:["whirlpool",{address:e,endpoint:t.rpcEndpoint}]})])),onError:e=>{g.Ay.error(`Transaction failed! ${e}`)}})}({address:t});if(!e)return(0,z.jsx)("button",{className:"btn btn-xs lg:btn-md btn-outline",onClick:async()=>{await n.mutateAsync({tickStartIndex:i})},children:"Initialize"})}},61738:(e,t,i)=>{var n={"./af":99805,"./af.js":99805,"./ar":94449,"./ar-dz":44468,"./ar-dz.js":44468,"./ar-kw":63480,"./ar-kw.js":63480,"./ar-ly":64197,"./ar-ly.js":64197,"./ar-ma":62180,"./ar-ma.js":62180,"./ar-ps":29343,"./ar-ps.js":29343,"./ar-sa":50230,"./ar-sa.js":50230,"./ar-tn":72808,"./ar-tn.js":72808,"./ar.js":94449,"./az":45865,"./az.js":45865,"./be":86627,"./be.js":86627,"./bg":60901,"./bg.js":60901,"./bm":63179,"./bm.js":63179,"./bn":61966,"./bn-bd":90969,"./bn-bd.js":90969,"./bn.js":61966,"./bo":6317,"./bo.js":6317,"./br":46474,"./br.js":46474,"./bs":35961,"./bs.js":35961,"./ca":77270,"./ca.js":77270,"./cs":61564,"./cs.js":61564,"./cv":43239,"./cv.js":43239,"./cy":92366,"./cy.js":92366,"./da":82453,"./da.js":82453,"./de":76601,"./de-at":25027,"./de-at.js":25027,"./de-ch":8101,"./de-ch.js":8101,"./de.js":76601,"./dv":96080,"./dv.js":96080,"./el":12655,"./el.js":12655,"./en-au":46836,"./en-au.js":46836,"./en-ca":22086,"./en-ca.js":22086,"./en-gb":2103,"./en-gb.js":2103,"./en-ie":35964,"./en-ie.js":35964,"./en-il":74379,"./en-il.js":74379,"./en-in":50765,"./en-in.js":50765,"./en-nz":71502,"./en-nz.js":71502,"./en-sg":1152,"./en-sg.js":1152,"./eo":90050,"./eo.js":90050,"./es":43350,"./es-do":49338,"./es-do.js":49338,"./es-mx":51326,"./es-mx.js":51326,"./es-us":89947,"./es-us.js":89947,"./es.js":43350,"./et":18231,"./et.js":18231,"./eu":28512,"./eu.js":28512,"./fa":59083,"./fa.js":59083,"./fi":25059,"./fi.js":25059,"./fil":32607,"./fil.js":32607,"./fo":83369,"./fo.js":83369,"./fr":27390,"./fr-ca":66711,"./fr-ca.js":66711,"./fr-ch":6152,"./fr-ch.js":6152,"./fr.js":27390,"./fy":62419,"./fy.js":62419,"./ga":3002,"./ga.js":3002,"./gd":82533,"./gd.js":82533,"./gl":16557,"./gl.js":16557,"./gom-deva":48944,"./gom-deva.js":48944,"./gom-latn":25387,"./gom-latn.js":25387,"./gu":17462,"./gu.js":17462,"./he":39237,"./he.js":39237,"./hi":49617,"./hi.js":49617,"./hr":36544,"./hr.js":36544,"./hu":60341,"./hu.js":60341,"./hy-am":41388,"./hy-am.js":41388,"./id":75251,"./id.js":75251,"./is":41146,"./is.js":41146,"./it":37891,"./it-ch":80007,"./it-ch.js":80007,"./it.js":37891,"./ja":73727,"./ja.js":73727,"./jv":5198,"./jv.js":5198,"./ka":28974,"./ka.js":28974,"./kk":37308,"./kk.js":37308,"./km":57786,"./km.js":57786,"./kn":84807,"./kn.js":84807,"./ko":61584,"./ko.js":61584,"./ku":61906,"./ku-kmr":75305,"./ku-kmr.js":75305,"./ku.js":61906,"./ky":79190,"./ky.js":79190,"./lb":7396,"./lb.js":7396,"./lo":38503,"./lo.js":38503,"./lt":33010,"./lt.js":33010,"./lv":5192,"./lv.js":5192,"./me":51944,"./me.js":51944,"./mi":56492,"./mi.js":56492,"./mk":2934,"./mk.js":2934,"./ml":61463,"./ml.js":61463,"./mn":8377,"./mn.js":8377,"./mr":78733,"./mr.js":78733,"./ms":18030,"./ms-my":39445,"./ms-my.js":39445,"./ms.js":18030,"./mt":55887,"./mt.js":55887,"./my":87228,"./my.js":87228,"./nb":48294,"./nb.js":48294,"./ne":19559,"./ne.js":19559,"./nl":20600,"./nl-be":78796,"./nl-be.js":78796,"./nl.js":20600,"./nn":9570,"./nn.js":9570,"./oc-lnc":5662,"./oc-lnc.js":5662,"./pa-in":87101,"./pa-in.js":87101,"./pl":56118,"./pl.js":56118,"./pt":29198,"./pt-br":7203,"./pt-br.js":7203,"./pt.js":29198,"./ro":45565,"./ro.js":45565,"./ru":33315,"./ru.js":33315,"./sd":58473,"./sd.js":58473,"./se":11258,"./se.js":11258,"./si":98798,"./si.js":98798,"./sk":26404,"./sk.js":26404,"./sl":7057,"./sl.js":7057,"./sq":25718,"./sq.js":25718,"./sr":45363,"./sr-cyrl":20478,"./sr-cyrl.js":20478,"./sr.js":45363,"./ss":37260,"./ss.js":37260,"./sv":42231,"./sv.js":42231,"./sw":27104,"./sw.js":27104,"./ta":47493,"./ta.js":47493,"./te":57705,"./te.js":57705,"./tet":94457,"./tet.js":94457,"./tg":22727,"./tg.js":22727,"./th":32206,"./th.js":32206,"./tk":33419,"./tk.js":33419,"./tl-ph":77243,"./tl-ph.js":77243,"./tlh":60016,"./tlh.js":60016,"./tr":87020,"./tr.js":87020,"./tzl":8026,"./tzl.js":8026,"./tzm":918,"./tzm-latn":87899,"./tzm-latn.js":87899,"./tzm.js":918,"./ug-cn":40818,"./ug-cn.js":40818,"./uk":48478,"./uk.js":48478,"./ur":77893,"./ur.js":77893,"./uz":89133,"./uz-latn":20311,"./uz-latn.js":20311,"./uz.js":89133,"./vi":52179,"./vi.js":52179,"./x-pseudo":92455,"./x-pseudo.js":92455,"./yo":3310,"./yo.js":3310,"./zh-cn":27244,"./zh-cn.js":27244,"./zh-hk":40076,"./zh-hk.js":40076,"./zh-mo":62305,"./zh-mo.js":62305,"./zh-tw":88588,"./zh-tw.js":88588};function r(e){var t=s(e);return i(t)}function s(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=61738},57122:()=>{},80564:()=>{},33258:()=>{},88776:()=>{},97209:()=>{},46093:()=>{},7564:()=>{},23092:()=>{},18657:()=>{},98408:()=>{},14098:()=>{}}]);